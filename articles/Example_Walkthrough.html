<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="TangledFeatures">
<title>Example_Walkthrough • TangledFeatures</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example_Walkthrough">
<meta property="og:description" content="TangledFeatures">
<meta property="og:image" content="https://allen-1242.github.io/TangledFeatures/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">TangledFeatures</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Correlation.html">Correlation</a>
    <a class="dropdown-item" href="../articles/Data_Input.html">Data_Input</a>
    <a class="dropdown-item" href="../articles/Example_Walkthrough.html">Example_Walkthrough</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Example_Walkthrough</h1>
            
      
      
      <div class="d-none name"><code>Example_Walkthrough.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this walkthrough, we will go through the various use cases of
TangledFeatures and how it outperforms traditional feature selection
methods. We will also compare the raw accuracy of the package to other
methods including standard black box approaches.</p>
<p>TangledFeatures relies on the dataset input to be correct. If there
are categorical features please ensure that it is input as a factor. If
done correctly, the package will identify the correct correlation based
relationships between the variables.</p>
<p>In this example, we will be using the Boston housing prices data set.
There has been some cleaning beforehand so that all the variables are in
the correct orientation.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>TangledFeatures primarily relies on ggplot2 for visualization,
data.table for data manipulation, correlation for various correlation
methods and ranger for its Random Forest implementation. There are a few
other packages used to run certain features.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>warn<span class="op">=</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/imbs-hl/ranger" class="external-link">ranger</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://igraph.org" class="external-link">igraph</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/correlation/" class="external-link">correlation</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jacobkap/fastDummies" class="external-link">fastDummies</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.stat.berkeley.edu/~breiman/RandomForests/" class="external-link">randomForest</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glmnet.stanford.edu" class="external-link">glmnet</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/topepo/caret/" class="external-link">caret</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bbolker/broom.mixed" class="external-link">broom.mixed</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jtools.jacob-long.com" class="external-link">jtools</a></span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="loading-the-data">Loading the Data<a class="anchor" aria-label="anchor" href="#loading-the-data"></a>
</h2>
<p>To read the data we can use the simple:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">TangledFeatures</span><span class="fu">::</span><span class="va"><a href="../reference/Housing_Prices_dataset.html">Housing_Prices_dataset</a></span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<p>Let’s call the package’s data cleaning function. It sets dummy
columns, cleans NAs and a host of other functions. You can check the
‘Data Cleaning’ tab for further information. We also need to define the
dependent variable.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu">TangledFeatures</span><span class="fu">::</span><span class="fu"><a href="../reference/DataCleaning.html">DataCleaning</a></span><span class="op">(</span>Data <span class="op">=</span> <span class="va">data</span>, Y_var <span class="op">=</span> <span class="st">'SalePrice'</span><span class="op">)</span></span></code></pre></div>
<p>Let’s see the new columns</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   [1] "ms_sub_class"            "lot_frontage"           </span></span>
<span><span class="co">#&gt;   [3] "lot_area"                "overall_qual"           </span></span>
<span><span class="co">#&gt;   [5] "overall_cond"            "year_built"             </span></span>
<span><span class="co">#&gt;   [7] "year_remod_add"          "mas_vnr_area"           </span></span>
<span><span class="co">#&gt;   [9] "bsmt_fin_sf1"            "bsmt_fin_sf2"           </span></span>
<span><span class="co">#&gt;  [11] "bsmt_unf_sf"             "total_bsmt_sf"          </span></span>
<span><span class="co">#&gt;  [13] "x1st_flr_sf"             "x2nd_flr_sf"            </span></span>
<span><span class="co">#&gt;  [15] "low_qual_fin_sf"         "gr_liv_area"            </span></span>
<span><span class="co">#&gt;  [17] "bsmt_full_bath"          "bsmt_half_bath"         </span></span>
<span><span class="co">#&gt;  [19] "full_bath"               "half_bath"              </span></span>
<span><span class="co">#&gt;  [21] "bedroom_abv_gr"          "kitchen_abv_gr"         </span></span>
<span><span class="co">#&gt;  [23] "tot_rms_abv_grd"         "fireplaces"             </span></span>
<span><span class="co">#&gt;  [25] "garage_yr_blt"           "garage_cars"            </span></span>
<span><span class="co">#&gt;  [27] "garage_area"             "wood_deck_sf"           </span></span>
<span><span class="co">#&gt;  [29] "open_porch_sf"           "enclosed_porch"         </span></span>
<span><span class="co">#&gt;  [31] "x3ssn_porch"             "screen_porch"           </span></span>
<span><span class="co">#&gt;  [33] "pool_area"               "misc_val"               </span></span>
<span><span class="co">#&gt;  [35] "mo_sold"                 "yr_sold"                </span></span>
<span><span class="co">#&gt;  [37] "sale_price"              "ms_zoning_c_all"        </span></span>
<span><span class="co">#&gt;  [39] "ms_zoning_fv"            "ms_zoning_rh"           </span></span>
<span><span class="co">#&gt;  [41] "ms_zoning_rl"            "ms_zoning_rm"           </span></span>
<span><span class="co">#&gt;  [43] "street_grvl"             "street_pave"            </span></span>
<span><span class="co">#&gt;  [45] "alley_0"                 "alley_grvl"             </span></span>
<span><span class="co">#&gt;  [47] "alley_pave"              "lot_shape_ir1"          </span></span>
<span><span class="co">#&gt;  [49] "lot_shape_ir2"           "lot_shape_ir3"          </span></span>
<span><span class="co">#&gt;  [51] "lot_shape_reg"           "land_contour_bnk"       </span></span>
<span><span class="co">#&gt;  [53] "land_contour_hls"        "land_contour_low"       </span></span>
<span><span class="co">#&gt;  [55] "land_contour_lvl"        "utilities_all_pub"      </span></span>
<span><span class="co">#&gt;  [57] "utilities_no_se_wa"      "lot_config_corner"      </span></span>
<span><span class="co">#&gt;  [59] "lot_config_cul_d_sac"    "lot_config_fr2"         </span></span>
<span><span class="co">#&gt;  [61] "lot_config_fr3"          "lot_config_inside"      </span></span>
<span><span class="co">#&gt;  [63] "land_slope_gtl"          "land_slope_mod"         </span></span>
<span><span class="co">#&gt;  [65] "land_slope_sev"          "neighborhood_blmngtn"   </span></span>
<span><span class="co">#&gt;  [67] "neighborhood_blueste"    "neighborhood_br_dale"   </span></span>
<span><span class="co">#&gt;  [69] "neighborhood_brk_side"   "neighborhood_clear_cr"  </span></span>
<span><span class="co">#&gt;  [71] "neighborhood_collg_cr"   "neighborhood_crawfor"   </span></span>
<span><span class="co">#&gt;  [73] "neighborhood_edwards"    "neighborhood_gilbert"   </span></span>
<span><span class="co">#&gt;  [75] "neighborhood_idotrr"     "neighborhood_meadow_v"  </span></span>
<span><span class="co">#&gt;  [77] "neighborhood_mitchel"    "neighborhood_n_ames"    </span></span>
<span><span class="co">#&gt;  [79] "neighborhood_no_ridge"   "neighborhood_n_pk_vill" </span></span>
<span><span class="co">#&gt;  [81] "neighborhood_nridg_ht"   "neighborhood_nw_ames"   </span></span>
<span><span class="co">#&gt;  [83] "neighborhood_old_town"   "neighborhood_sawyer"    </span></span>
<span><span class="co">#&gt;  [85] "neighborhood_sawyer_w"   "neighborhood_somerst"   </span></span>
<span><span class="co">#&gt;  [87] "neighborhood_stone_br"   "neighborhood_swisu"     </span></span>
<span><span class="co">#&gt;  [89] "neighborhood_timber"     "neighborhood_veenker"   </span></span>
<span><span class="co">#&gt;  [91] "condition1_artery"       "condition1_feedr"       </span></span>
<span><span class="co">#&gt;  [93] "condition1_norm"         "condition1_pos_a"       </span></span>
<span><span class="co">#&gt;  [95] "condition1_pos_n"        "condition1_rr_ae"       </span></span>
<span><span class="co">#&gt;  [97] "condition1_rr_an"        "condition1_rr_ne"       </span></span>
<span><span class="co">#&gt;  [99] "condition1_rr_nn"        "condition2_artery"      </span></span>
<span><span class="co">#&gt; [101] "condition2_feedr"        "condition2_norm"        </span></span>
<span><span class="co">#&gt; [103] "condition2_pos_a"        "condition2_pos_n"       </span></span>
<span><span class="co">#&gt; [105] "condition2_rr_ae"        "condition2_rr_an"       </span></span>
<span><span class="co">#&gt; [107] "condition2_rr_nn"        "bldg_type_1fam"         </span></span>
<span><span class="co">#&gt; [109] "bldg_type_2fm_con"       "bldg_type_duplex"       </span></span>
<span><span class="co">#&gt; [111] "bldg_type_twnhs"         "bldg_type_twnhs_e"      </span></span>
<span><span class="co">#&gt; [113] "house_style_1_5fin"      "house_style_1_5unf"     </span></span>
<span><span class="co">#&gt; [115] "house_style_1story"      "house_style_2_5fin"     </span></span>
<span><span class="co">#&gt; [117] "house_style_2_5unf"      "house_style_2story"     </span></span>
<span><span class="co">#&gt; [119] "house_style_s_foyer"     "house_style_s_lvl"      </span></span>
<span><span class="co">#&gt; [121] "roof_style_flat"         "roof_style_gable"       </span></span>
<span><span class="co">#&gt; [123] "roof_style_gambrel"      "roof_style_hip"         </span></span>
<span><span class="co">#&gt; [125] "roof_style_mansard"      "roof_style_shed"        </span></span>
<span><span class="co">#&gt; [127] "roof_matl_cly_tile"      "roof_matl_comp_shg"     </span></span>
<span><span class="co">#&gt; [129] "roof_matl_membran"       "roof_matl_metal"        </span></span>
<span><span class="co">#&gt; [131] "roof_matl_roll"          "roof_matl_tar_grv"      </span></span>
<span><span class="co">#&gt; [133] "roof_matl_wd_shake"      "roof_matl_wd_shngl"     </span></span>
<span><span class="co">#&gt; [135] "exterior1st_asb_shng"    "exterior1st_asph_shn"   </span></span>
<span><span class="co">#&gt; [137] "exterior1st_brk_comm"    "exterior1st_brk_face"   </span></span>
<span><span class="co">#&gt; [139] "exterior1st_c_block"     "exterior1st_cemnt_bd"   </span></span>
<span><span class="co">#&gt; [141] "exterior1st_hd_board"    "exterior1st_im_stucc"   </span></span>
<span><span class="co">#&gt; [143] "exterior1st_metal_sd"    "exterior1st_plywood"    </span></span>
<span><span class="co">#&gt; [145] "exterior1st_stone"       "exterior1st_stucco"     </span></span>
<span><span class="co">#&gt; [147] "exterior1st_vinyl_sd"    "exterior1st_wd_sdng"    </span></span>
<span><span class="co">#&gt; [149] "exterior1st_wd_shing"    "exterior2nd_asb_shng"   </span></span>
<span><span class="co">#&gt; [151] "exterior2nd_asph_shn"    "exterior2nd_brk_cmn"    </span></span>
<span><span class="co">#&gt; [153] "exterior2nd_brk_face"    "exterior2nd_c_block"    </span></span>
<span><span class="co">#&gt; [155] "exterior2nd_cment_bd"    "exterior2nd_hd_board"   </span></span>
<span><span class="co">#&gt; [157] "exterior2nd_im_stucc"    "exterior2nd_metal_sd"   </span></span>
<span><span class="co">#&gt; [159] "exterior2nd_other"       "exterior2nd_plywood"    </span></span>
<span><span class="co">#&gt; [161] "exterior2nd_stone"       "exterior2nd_stucco"     </span></span>
<span><span class="co">#&gt; [163] "exterior2nd_vinyl_sd"    "exterior2nd_wd_sdng"    </span></span>
<span><span class="co">#&gt; [165] "exterior2nd_wd_shng"     "mas_vnr_type_0"         </span></span>
<span><span class="co">#&gt; [167] "mas_vnr_type_brk_cmn"    "mas_vnr_type_brk_face"  </span></span>
<span><span class="co">#&gt; [169] "mas_vnr_type_none"       "mas_vnr_type_stone"     </span></span>
<span><span class="co">#&gt; [171] "exter_qual_ex"           "exter_qual_fa"          </span></span>
<span><span class="co">#&gt; [173] "exter_qual_gd"           "exter_qual_ta"          </span></span>
<span><span class="co">#&gt; [175] "exter_cond_ex"           "exter_cond_fa"          </span></span>
<span><span class="co">#&gt; [177] "exter_cond_gd"           "exter_cond_po"          </span></span>
<span><span class="co">#&gt; [179] "exter_cond_ta"           "foundation_brk_til"     </span></span>
<span><span class="co">#&gt; [181] "foundation_c_block"      "foundation_p_conc"      </span></span>
<span><span class="co">#&gt; [183] "foundation_slab"         "foundation_stone"       </span></span>
<span><span class="co">#&gt; [185] "foundation_wood"         "bsmt_qual_0"            </span></span>
<span><span class="co">#&gt; [187] "bsmt_qual_ex"            "bsmt_qual_fa"           </span></span>
<span><span class="co">#&gt; [189] "bsmt_qual_gd"            "bsmt_qual_ta"           </span></span>
<span><span class="co">#&gt; [191] "bsmt_cond_0"             "bsmt_cond_fa"           </span></span>
<span><span class="co">#&gt; [193] "bsmt_cond_gd"            "bsmt_cond_po"           </span></span>
<span><span class="co">#&gt; [195] "bsmt_cond_ta"            "bsmt_exposure_0"        </span></span>
<span><span class="co">#&gt; [197] "bsmt_exposure_av"        "bsmt_exposure_gd"       </span></span>
<span><span class="co">#&gt; [199] "bsmt_exposure_mn"        "bsmt_exposure_no"       </span></span>
<span><span class="co">#&gt; [201] "bsmt_fin_type1_0"        "bsmt_fin_type1_alq"     </span></span>
<span><span class="co">#&gt; [203] "bsmt_fin_type1_blq"      "bsmt_fin_type1_glq"     </span></span>
<span><span class="co">#&gt; [205] "bsmt_fin_type1_lw_q"     "bsmt_fin_type1_rec"     </span></span>
<span><span class="co">#&gt; [207] "bsmt_fin_type1_unf"      "bsmt_fin_type2_0"       </span></span>
<span><span class="co">#&gt; [209] "bsmt_fin_type2_alq"      "bsmt_fin_type2_blq"     </span></span>
<span><span class="co">#&gt; [211] "bsmt_fin_type2_glq"      "bsmt_fin_type2_lw_q"    </span></span>
<span><span class="co">#&gt; [213] "bsmt_fin_type2_rec"      "bsmt_fin_type2_unf"     </span></span>
<span><span class="co">#&gt; [215] "heating_floor"           "heating_gas_a"          </span></span>
<span><span class="co">#&gt; [217] "heating_gas_w"           "heating_grav"           </span></span>
<span><span class="co">#&gt; [219] "heating_oth_w"           "heating_wall"           </span></span>
<span><span class="co">#&gt; [221] "heating_qc_ex"           "heating_qc_fa"          </span></span>
<span><span class="co">#&gt; [223] "heating_qc_gd"           "heating_qc_po"          </span></span>
<span><span class="co">#&gt; [225] "heating_qc_ta"           "central_air_n"          </span></span>
<span><span class="co">#&gt; [227] "central_air_y"           "electrical_0"           </span></span>
<span><span class="co">#&gt; [229] "electrical_fuse_a"       "electrical_fuse_f"      </span></span>
<span><span class="co">#&gt; [231] "electrical_fuse_p"       "electrical_mix"         </span></span>
<span><span class="co">#&gt; [233] "electrical_s_brkr"       "kitchen_qual_ex"        </span></span>
<span><span class="co">#&gt; [235] "kitchen_qual_fa"         "kitchen_qual_gd"        </span></span>
<span><span class="co">#&gt; [237] "kitchen_qual_ta"         "functional_maj1"        </span></span>
<span><span class="co">#&gt; [239] "functional_maj2"         "functional_min1"        </span></span>
<span><span class="co">#&gt; [241] "functional_min2"         "functional_mod"         </span></span>
<span><span class="co">#&gt; [243] "functional_sev"          "functional_typ"         </span></span>
<span><span class="co">#&gt; [245] "fireplace_qu_0"          "fireplace_qu_ex"        </span></span>
<span><span class="co">#&gt; [247] "fireplace_qu_fa"         "fireplace_qu_gd"        </span></span>
<span><span class="co">#&gt; [249] "fireplace_qu_po"         "fireplace_qu_ta"        </span></span>
<span><span class="co">#&gt; [251] "garage_type_0"           "garage_type_2types"     </span></span>
<span><span class="co">#&gt; [253] "garage_type_attchd"      "garage_type_basment"    </span></span>
<span><span class="co">#&gt; [255] "garage_type_built_in"    "garage_type_car_port"   </span></span>
<span><span class="co">#&gt; [257] "garage_type_detchd"      "garage_finish_0"        </span></span>
<span><span class="co">#&gt; [259] "garage_finish_fin"       "garage_finish_r_fn"     </span></span>
<span><span class="co">#&gt; [261] "garage_finish_unf"       "garage_qual_0"          </span></span>
<span><span class="co">#&gt; [263] "garage_qual_ex"          "garage_qual_fa"         </span></span>
<span><span class="co">#&gt; [265] "garage_qual_gd"          "garage_qual_po"         </span></span>
<span><span class="co">#&gt; [267] "garage_qual_ta"          "garage_cond_0"          </span></span>
<span><span class="co">#&gt; [269] "garage_cond_ex"          "garage_cond_fa"         </span></span>
<span><span class="co">#&gt; [271] "garage_cond_gd"          "garage_cond_po"         </span></span>
<span><span class="co">#&gt; [273] "garage_cond_ta"          "paved_drive_n"          </span></span>
<span><span class="co">#&gt; [275] "paved_drive_p"           "paved_drive_y"          </span></span>
<span><span class="co">#&gt; [277] "pool_qc_0"               "pool_qc_ex"             </span></span>
<span><span class="co">#&gt; [279] "pool_qc_fa"              "pool_qc_gd"             </span></span>
<span><span class="co">#&gt; [281] "fence_0"                 "fence_gd_prv"           </span></span>
<span><span class="co">#&gt; [283] "fence_gd_wo"             "fence_mn_prv"           </span></span>
<span><span class="co">#&gt; [285] "fence_mn_ww"             "misc_feature_0"         </span></span>
<span><span class="co">#&gt; [287] "misc_feature_gar2"       "misc_feature_othr"      </span></span>
<span><span class="co">#&gt; [289] "misc_feature_shed"       "misc_feature_ten_c"     </span></span>
<span><span class="co">#&gt; [291] "sale_type_cod"           "sale_type_con"          </span></span>
<span><span class="co">#&gt; [293] "sale_type_con_ld"        "sale_type_con_li"       </span></span>
<span><span class="co">#&gt; [295] "sale_type_con_lw"        "sale_type_cwd"          </span></span>
<span><span class="co">#&gt; [297] "sale_type_new"           "sale_type_oth"          </span></span>
<span><span class="co">#&gt; [299] "sale_type_wd"            "sale_condition_abnorml" </span></span>
<span><span class="co">#&gt; [301] "sale_condition_adj_land" "sale_condition_alloca"  </span></span>
<span><span class="co">#&gt; [303] "sale_condition_family"   "sale_condition_normal"  </span></span>
<span><span class="co">#&gt; [305] "sale_condition_partial"</span></span></code></pre></div>
<p>As we can see post cleaning, we have created many new columns.</p>
</div>
<div class="section level2">
<h2 id="correlation-and-treating-the-data">Correlation and treating the data<a class="anchor" aria-label="anchor" href="#correlation-and-treating-the-data"></a>
</h2>
<p>We are able to identify the variable class for each variable and
assign it’s appropriate correlation relationship with other variables.
Read more in the Correlation section.</p>
<p>Let’s call the main package function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Results</span> <span class="op">&lt;-</span> <span class="fu">TangledFeatures</span><span class="fu">::</span><span class="fu"><a href="../reference/TangledFeatures.html">TangledFeatures</a></span><span class="op">(</span>Data <span class="op">=</span> <span class="fu">TangledFeatures</span><span class="fu">::</span><span class="va"><a href="../reference/Housing_Prices_dataset.html">Housing_Prices_dataset</a></span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>, Y_var <span class="op">=</span> <span class="st">'SalePrice'</span>, Focus_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, corr_cutoff <span class="op">=</span> <span class="fl">0.85</span>, RF_coverage <span class="op">=</span> <span class="fl">0.95</span>,  plot <span class="op">=</span> <span class="cn">TRUE</span>, fast_calculation <span class="op">=</span> <span class="cn">FALSE</span>, cor1 <span class="op">=</span> <span class="st">'pearson'</span>, cor2 <span class="op">=</span> <span class="st">'polychoric'</span>, cor3 <span class="op">=</span> <span class="st">'spearman'</span><span class="op">)</span></span></code></pre></div>
<p>The function returns visualizations and metrics about the correlation
as well as other interesting outputs.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Heatmap_plot</span> <span class="op">&lt;-</span> <span class="va">Results</span><span class="op">$</span><span class="va">Correlation_heatmap</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Heatmap_plot</span><span class="op">)</span></span></code></pre></div>
<p><img src="Example_Walkthrough_files/figure-html/Correlation%20Heatmap-1.png" width="700"></p>
<p>For visualization purposes, we are only working with the top 20
variables. We can take the various relationships and visualize them on a
single graph. TangledFeatures also returns the variables as well as the
correlation metric used between them.</p>
<p>From the graph we can broadly see that there are two clusters of
interrelated variables, basement related variables and garage related
variables. Additionally there are smaller clusters.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Igraph_plot</span> <span class="op">&lt;-</span> <span class="va">Results</span><span class="op">$</span><span class="va">Graph_plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Igraph_plot</span><span class="op">)</span></span></code></pre></div>
<p><img src="Example_Walkthrough_files/figure-html/Correlation%20Graph-1.png" width="700"></p>
<p>TangledFeatures uses graph theory algorithms to define clusters of
interrelated variables. From the network plot we can see the two
clusters that we observed in the heatmap, as well as a few other
clusters.</p>
<p>Let’s see the correlation between the sales price and the other
variables. We are plotting only significant correlations above 0.4 and
below -0.4 for space.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">cor_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">)</span><span class="op">[</span>,<span class="fl">37</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cor_df</span><span class="op">$</span><span class="va">Correlation</span> <span class="op">&lt;-</span> <span class="va">cor_df</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span> </span>
<span><span class="va">cor_df</span> <span class="op">&lt;-</span> <span class="va">cor_df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">cor_df</span><span class="op">$</span><span class="va">Variable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">cor_df</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">cor_df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span></span>
<span><span class="va">cor_df_subset</span> <span class="op">&lt;-</span> <span class="va">cor_df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">cor_df</span><span class="op">$</span><span class="va">Correlation</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0.4</span>,<span class="op">]</span></span>
<span><span class="va">cor_df_subset</span> <span class="op">&lt;-</span> <span class="va">cor_df_subset</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">cor_df_subset</span><span class="op">$</span><span class="va">Correlation</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">cor_df_subset</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">cor_df_subset</span><span class="op">$</span><span class="va">Variable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">cor_df_subset</span><span class="op">$</span><span class="va">Variable</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cor_df_subset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Correlation</span>, y <span class="op">=</span> <span class="va">Variable</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="va">cor_df_subset</span><span class="op">$</span><span class="va">Variable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="Example_Walkthrough_files/figure-html/Correlation%20Vs%20Sales-1.png" width="700"></p>
<p>Although simple correlation is of course not indicative of a
variable’s behavior in a linear model, this is a good starting place to
see the relationships. Both garage and basement variables have both
positive and negative relationships on the dependent variable. Let’s
observe the positive relationship of Garage Area and the Sale price.</p>
</div>
<div class="section level2">
<h2 id="features-selected-by-tangledfeatures">Features selected by TangledFeatures<a class="anchor" aria-label="anchor" href="#features-selected-by-tangledfeatures"></a>
</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">TangledFeatures_variables</span> <span class="op">&lt;-</span> <span class="va">Results</span><span class="op">$</span><span class="va">Final_Variables</span></span></code></pre></div>
<p>Let us input the given features into a linear model and observe the
behavior</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">formula_TangledFeatures</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"sale_price"</span>, <span class="st">'~'</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">TangledFeatures_variables</span>, collapse <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lm_TangledFeatures</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">formula_TangledFeatures</span>, data <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_TangledFeatures</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = formula_TangledFeatures, data = Data$Cleaned_Data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">#&gt; -506171  -16552    -904   14893  261389 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                 Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">#&gt; (Intercept)   -6.775e+05  8.020e+04  -8.448  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; overall_qual   1.822e+04  1.126e+03  16.186  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; gr_liv_area    8.524e+00  2.010e+01   0.424 0.671613    </span></span>
<span><span class="co">#&gt; year_built     3.153e+02  4.204e+01   7.500 1.11e-13 ***</span></span>
<span><span class="co">#&gt; total_bsmt_sf  1.587e+01  4.087e+00   3.883 0.000108 ***</span></span>
<span><span class="co">#&gt; garage_area    3.747e+01  5.948e+00   6.299 3.97e-10 ***</span></span>
<span><span class="co">#&gt; x1st_flr_sf    5.133e+01  2.066e+01   2.484 0.013103 *  </span></span>
<span><span class="co">#&gt; bsmt_qual_ex   4.945e+04  4.039e+03  12.244  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; x2nd_flr_sf    4.196e+01  2.039e+01   2.057 0.039833 *  </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual standard error: 36500 on 1451 degrees of freedom</span></span>
<span><span class="co">#&gt; Multiple R-squared:  0.7901, Adjusted R-squared:  0.789 </span></span>
<span><span class="co">#&gt; F-statistic: 682.8 on 8 and 1451 DF,  p-value: &lt; 2.2e-16</span></span></code></pre></div>
<p>The features selected all seem to indicate significance and more
importantly agree with the findings from our correlation analysis.</p>
</div>
<div class="section level2">
<h2 id="lets-see-what-simple-lasso-gives">Let’s see what simple Lasso gives<a class="anchor" aria-label="anchor" href="#lets-see-what-simple-lasso-gives"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/topepo/caret/" class="external-link">caret</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glmnet.stanford.edu" class="external-link">glmnet</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">control</span> <span class="op">=</span> <span class="fu">caret</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/caret/man/trainControl.html" class="external-link">trainControl</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"cv"</span>,number<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">849</span><span class="op">)</span></span>
<span><span class="va">lasso_caret</span> <span class="op">&lt;-</span> <span class="fu">caret</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">[</span> , <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sale_price"</span><span class="op">)</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">$</span><span class="va">sale_price</span>, method <span class="op">=</span> <span class="st">"glmnet"</span>,</span>
<span>                trControl<span class="op">=</span><span class="va">control</span>, preProc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"center"</span>,<span class="st">"scale"</span><span class="op">)</span>,</span>
<span>                tuneGrid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                       lambda <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lasso_coef</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">lasso_caret</span><span class="op">$</span><span class="va">finalModel</span>,<span class="va">lasso_caret</span><span class="op">$</span><span class="va">bestTune</span><span class="op">$</span><span class="va">lambda</span><span class="op">)</span></span></code></pre></div>
<p>Let’s run a linear model with the variables we get from lasso</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lasso_coef</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">lasso_coef</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lasso_coef</span><span class="op">$</span><span class="va">Var_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">lasso_coef</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">lasso_variables</span> <span class="op">&lt;-</span> <span class="va">lasso_coef</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">lasso_coef</span><span class="op">$</span><span class="va">s1</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span>,<span class="op">]</span><span class="op">$</span><span class="va">Var_names</span></span>
<span></span>
<span><span class="va">formula_lasso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"sale_price"</span>, <span class="st">'~'</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">lasso_variables</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, collapse <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lm_lasso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">formula_lasso</span>, data <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_lasso</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = formula_lasso, data = Data$Cleaned_Data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">#&gt; -310125  -11206     300   10830  243571 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients: (1 not defined because of singularities)</span></span>
<span><span class="co">#&gt;                           Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">#&gt; (Intercept)             -1.494e+06  1.854e+05  -8.061 1.68e-15 ***</span></span>
<span><span class="co">#&gt; lot_frontage            -1.631e+01  2.468e+01  -0.661 0.508981    </span></span>
<span><span class="co">#&gt; lot_area                 3.728e-01  9.113e-02   4.090 4.57e-05 ***</span></span>
<span><span class="co">#&gt; overall_qual             7.642e+03  1.067e+03   7.160 1.34e-12 ***</span></span>
<span><span class="co">#&gt; overall_cond             5.346e+03  9.229e+02   5.792 8.68e-09 ***</span></span>
<span><span class="co">#&gt; year_built               2.957e+02  6.762e+01   4.374 1.32e-05 ***</span></span>
<span><span class="co">#&gt; year_remod_add           6.050e+01  5.848e+01   1.034 0.301109    </span></span>
<span><span class="co">#&gt; mas_vnr_area             1.157e+01  5.239e+00   2.209 0.027330 *  </span></span>
<span><span class="co">#&gt; bsmt_fin_sf1             6.080e+00  2.863e+00   2.124 0.033895 *  </span></span>
<span><span class="co">#&gt; bsmt_fin_sf2             5.939e+00  8.850e+00   0.671 0.502286    </span></span>
<span><span class="co">#&gt; total_bsmt_sf            5.306e+00  4.858e+00   1.092 0.274891    </span></span>
<span><span class="co">#&gt; x2nd_flr_sf              1.294e+01  6.577e+00   1.968 0.049270 *  </span></span>
<span><span class="co">#&gt; gr_liv_area              4.193e+01  5.747e+00   7.295 5.12e-13 ***</span></span>
<span><span class="co">#&gt; bsmt_full_bath           6.152e+03  2.073e+03   2.968 0.003048 ** </span></span>
<span><span class="co">#&gt; full_bath                6.784e+03  2.315e+03   2.931 0.003442 ** </span></span>
<span><span class="co">#&gt; half_bath                1.951e+03  2.283e+03   0.854 0.393111    </span></span>
<span><span class="co">#&gt; tot_rms_abv_grd          2.013e+03  8.992e+02   2.239 0.025315 *  </span></span>
<span><span class="co">#&gt; fireplaces               6.717e+03  2.919e+03   2.301 0.021544 *  </span></span>
<span><span class="co">#&gt; garage_cars              8.637e+03  2.400e+03   3.599 0.000331 ***</span></span>
<span><span class="co">#&gt; garage_area             -2.135e+00  8.145e+00  -0.262 0.793295    </span></span>
<span><span class="co">#&gt; wood_deck_sf             1.215e+01  6.653e+00   1.826 0.068061 .  </span></span>
<span><span class="co">#&gt; open_porch_sf           -1.893e+01  1.277e+01  -1.483 0.138354    </span></span>
<span><span class="co">#&gt; enclosed_porch           1.751e+01  1.393e+01   1.256 0.209261    </span></span>
<span><span class="co">#&gt; x3ssn_porch              3.536e+01  2.508e+01   1.410 0.158799    </span></span>
<span><span class="co">#&gt; screen_porch             5.370e+01  1.389e+01   3.866 0.000116 ***</span></span>
<span><span class="co">#&gt; pool_area                1.121e+03  1.449e+02   7.738 1.98e-14 ***</span></span>
<span><span class="co">#&gt; misc_val                -8.996e-02  1.607e+00  -0.056 0.955353    </span></span>
<span><span class="co">#&gt; ms_zoning_fv             6.025e+03  7.526e+03   0.801 0.423541    </span></span>
<span><span class="co">#&gt; alley_grvl               3.559e+02  4.508e+03   0.079 0.937075    </span></span>
<span><span class="co">#&gt; lot_shape_ir2            7.225e+03  4.714e+03   1.533 0.125578    </span></span>
<span><span class="co">#&gt; lot_shape_ir3           -2.439e+04  9.427e+03  -2.588 0.009768 ** </span></span>
<span><span class="co">#&gt; land_contour_hls         5.743e+03  4.395e+03   1.307 0.191599    </span></span>
<span><span class="co">#&gt; utilities_all_pub        1.910e+04  2.873e+04   0.665 0.506327    </span></span>
<span><span class="co">#&gt; lot_config_corner        2.021e+03  1.973e+03   1.025 0.305765    </span></span>
<span><span class="co">#&gt; lot_config_cul_d_sac     1.021e+04  3.348e+03   3.048 0.002349 ** </span></span>
<span><span class="co">#&gt; land_slope_mod           3.222e+03  3.981e+03   0.809 0.418491    </span></span>
<span><span class="co">#&gt; neighborhood_blmngtn     1.065e+04  7.619e+03   1.398 0.162308    </span></span>
<span><span class="co">#&gt; neighborhood_blueste     7.605e+03  2.009e+04   0.379 0.705017    </span></span>
<span><span class="co">#&gt; neighborhood_br_dale     1.472e+04  8.032e+03   1.832 0.067114 .  </span></span>
<span><span class="co">#&gt; neighborhood_brk_side    1.308e+04  4.379e+03   2.987 0.002868 ** </span></span>
<span><span class="co">#&gt; neighborhood_crawfor     2.716e+04  4.527e+03   5.999 2.56e-09 ***</span></span>
<span><span class="co">#&gt; neighborhood_meadow_v    7.828e+03  8.985e+03   0.871 0.383788    </span></span>
<span><span class="co">#&gt; neighborhood_no_ridge    5.151e+04  5.217e+03   9.872  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; neighborhood_n_pk_vill   2.403e+04  9.833e+03   2.444 0.014671 *  </span></span>
<span><span class="co">#&gt; neighborhood_nridg_ht    3.936e+04  4.425e+03   8.896  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; neighborhood_sawyer_w    9.515e+03  3.962e+03   2.401 0.016471 *  </span></span>
<span><span class="co">#&gt; neighborhood_somerst     1.790e+04  6.810e+03   2.628 0.008677 ** </span></span>
<span><span class="co">#&gt; neighborhood_stone_br    5.795e+04  6.221e+03   9.316  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; neighborhood_swisu      -6.636e+01  6.130e+03  -0.011 0.991365    </span></span>
<span><span class="co">#&gt; neighborhood_veenker     1.401e+04  8.902e+03   1.574 0.115686    </span></span>
<span><span class="co">#&gt; condition1_norm          1.110e+04  2.589e+03   4.287 1.94e-05 ***</span></span>
<span><span class="co">#&gt; condition1_pos_n        -1.063e+04  7.020e+03  -1.515 0.130124    </span></span>
<span><span class="co">#&gt; condition1_rr_an         1.290e+04  6.436e+03   2.004 0.045295 *  </span></span>
<span><span class="co">#&gt; condition2_artery       -6.298e+03  2.174e+04  -0.290 0.772117    </span></span>
<span><span class="co">#&gt; condition2_feedr        -9.284e+03  1.254e+04  -0.740 0.459183    </span></span>
<span><span class="co">#&gt; condition2_pos_a         7.244e+04  3.508e+04   2.065 0.039128 *  </span></span>
<span><span class="co">#&gt; condition2_rr_nn        -6.379e+02  2.006e+04  -0.032 0.974637    </span></span>
<span><span class="co">#&gt; bldg_type_1fam           2.620e+04  2.983e+03   8.782  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; bldg_type_2fm_con        1.161e+04  6.506e+03   1.785 0.074455 .  </span></span>
<span><span class="co">#&gt; house_style_1_5unf       1.855e+04  8.792e+03   2.110 0.035031 *  </span></span>
<span><span class="co">#&gt; house_style_1story       1.844e+04  3.883e+03   4.749 2.27e-06 ***</span></span>
<span><span class="co">#&gt; house_style_s_foyer      1.008e+04  6.153e+03   1.638 0.101660    </span></span>
<span><span class="co">#&gt; house_style_s_lvl        4.487e+03  4.965e+03   0.904 0.366312    </span></span>
<span><span class="co">#&gt; roof_style_gambrel      -4.292e+03  9.057e+03  -0.474 0.635663    </span></span>
<span><span class="co">#&gt; roof_style_mansard       1.045e+04  1.124e+04   0.930 0.352487    </span></span>
<span><span class="co">#&gt; roof_style_shed          1.789e+04  2.097e+04   0.853 0.393564    </span></span>
<span><span class="co">#&gt; roof_matl_membran        3.339e+04  2.935e+04   1.137 0.255547    </span></span>
<span><span class="co">#&gt; roof_matl_metal          1.283e+04  2.803e+04   0.458 0.647148    </span></span>
<span><span class="co">#&gt; roof_matl_tar_grv       -2.425e+04  9.555e+03  -2.538 0.011278 *  </span></span>
<span><span class="co">#&gt; roof_matl_wd_shngl       7.803e+04  1.216e+04   6.418 1.92e-10 ***</span></span>
<span><span class="co">#&gt; exterior1st_asb_shng     2.036e+03  6.893e+03   0.295 0.767752    </span></span>
<span><span class="co">#&gt; exterior1st_brk_comm     1.183e+04  2.086e+04   0.567 0.570851    </span></span>
<span><span class="co">#&gt; exterior1st_brk_face     2.141e+04  4.435e+03   4.826 1.55e-06 ***</span></span>
<span><span class="co">#&gt; exterior1st_cemnt_bd     6.461e+03  1.671e+04   0.387 0.699072    </span></span>
<span><span class="co">#&gt; exterior1st_metal_sd     5.094e+03  2.662e+03   1.913 0.055908 .  </span></span>
<span><span class="co">#&gt; exterior1st_stone        9.264e+03  2.091e+04   0.443 0.657803    </span></span>
<span><span class="co">#&gt; exterior1st_stucco      -3.338e+03  6.428e+03  -0.519 0.603627    </span></span>
<span><span class="co">#&gt; exterior1st_wd_shing    -5.589e+02  5.873e+03  -0.095 0.924191    </span></span>
<span><span class="co">#&gt; exterior2nd_asph_shn     4.162e+03  1.666e+04   0.250 0.802795    </span></span>
<span><span class="co">#&gt; exterior2nd_cment_bd    -1.679e+03  1.696e+04  -0.099 0.921181    </span></span>
<span><span class="co">#&gt; exterior2nd_im_stucc     3.111e+04  9.098e+03   3.419 0.000647 ***</span></span>
<span><span class="co">#&gt; exterior2nd_vinyl_sd     6.990e+03  2.497e+03   2.799 0.005197 ** </span></span>
<span><span class="co">#&gt; exterior2nd_wd_sdng      2.532e+03  2.714e+03   0.933 0.351090    </span></span>
<span><span class="co">#&gt; mas_vnr_type_stone       6.489e+02  3.092e+03   0.210 0.833813    </span></span>
<span><span class="co">#&gt; exter_qual_ex            1.068e+04  5.465e+03   1.954 0.050924 .  </span></span>
<span><span class="co">#&gt; exter_qual_fa            6.099e+01  8.876e+03   0.007 0.994519    </span></span>
<span><span class="co">#&gt; exter_cond_ex            6.273e+03  1.995e+04   0.314 0.753273    </span></span>
<span><span class="co">#&gt; exter_cond_fa            2.618e+03  6.386e+03   0.410 0.681929    </span></span>
<span><span class="co">#&gt; exter_cond_po            4.701e+03  2.875e+04   0.163 0.870156    </span></span>
<span><span class="co">#&gt; foundation_p_conc        6.964e+02  2.504e+03   0.278 0.780928    </span></span>
<span><span class="co">#&gt; foundation_stone         2.800e+03  1.191e+04   0.235 0.814199    </span></span>
<span><span class="co">#&gt; bsmt_qual_0              1.866e+03  8.004e+03   0.233 0.815717    </span></span>
<span><span class="co">#&gt; bsmt_qual_ex             2.386e+04  3.706e+03   6.438 1.69e-10 ***</span></span>
<span><span class="co">#&gt; bsmt_qual_fa             2.396e+03  5.270e+03   0.455 0.649434    </span></span>
<span><span class="co">#&gt; bsmt_cond_po             1.600e+04  2.236e+04   0.715 0.474496    </span></span>
<span><span class="co">#&gt; bsmt_exposure_av         6.565e+03  2.406e+03   2.729 0.006442 ** </span></span>
<span><span class="co">#&gt; bsmt_exposure_gd         2.190e+04  3.304e+03   6.628 4.94e-11 ***</span></span>
<span><span class="co">#&gt; bsmt_fin_type1_0                NA         NA      NA       NA    </span></span>
<span><span class="co">#&gt; bsmt_fin_type1_blq       4.818e+03  2.653e+03   1.816 0.069635 .  </span></span>
<span><span class="co">#&gt; bsmt_fin_type1_glq       8.121e+03  2.396e+03   3.390 0.000720 ***</span></span>
<span><span class="co">#&gt; bsmt_fin_type2_alq       7.718e+03  7.350e+03   1.050 0.293891    </span></span>
<span><span class="co">#&gt; bsmt_fin_type2_glq       3.270e+02  9.026e+03   0.036 0.971104    </span></span>
<span><span class="co">#&gt; bsmt_fin_type2_unf       1.193e+03  4.010e+03   0.298 0.766021    </span></span>
<span><span class="co">#&gt; heating_gas_a           -1.115e+03  6.082e+03  -0.183 0.854535    </span></span>
<span><span class="co">#&gt; heating_wall             7.734e+03  1.601e+04   0.483 0.629109    </span></span>
<span><span class="co">#&gt; heating_qc_ex            2.811e+03  1.940e+03   1.449 0.147545    </span></span>
<span><span class="co">#&gt; heating_qc_fa           -1.120e+03  4.595e+03  -0.244 0.807536    </span></span>
<span><span class="co">#&gt; heating_qc_po           -2.082e+04  2.923e+04  -0.712 0.476349    </span></span>
<span><span class="co">#&gt; electrical_0             1.212e+04  2.758e+04   0.439 0.660473    </span></span>
<span><span class="co">#&gt; electrical_fuse_f        3.391e+02  5.987e+03   0.057 0.954840    </span></span>
<span><span class="co">#&gt; kitchen_qual_ex          2.694e+04  3.930e+03   6.854 1.10e-11 ***</span></span>
<span><span class="co">#&gt; kitchen_qual_fa          1.470e+03  5.378e+03   0.273 0.784665    </span></span>
<span><span class="co">#&gt; functional_min2          6.305e+03  6.093e+03   1.035 0.300948    </span></span>
<span><span class="co">#&gt; functional_typ           1.477e+04  3.996e+03   3.695 0.000229 ***</span></span>
<span><span class="co">#&gt; fireplace_qu_0           2.840e+03  3.724e+03   0.763 0.445763    </span></span>
<span><span class="co">#&gt; fireplace_qu_po          5.660e+03  6.515e+03   0.869 0.385159    </span></span>
<span><span class="co">#&gt; garage_type_basment     -3.744e+03  6.973e+03  -0.537 0.591425    </span></span>
<span><span class="co">#&gt; garage_type_car_port     3.354e+03  1.004e+04   0.334 0.738266    </span></span>
<span><span class="co">#&gt; garage_type_detchd       5.848e+02  2.277e+03   0.257 0.797350    </span></span>
<span><span class="co">#&gt; garage_finish_fin        1.330e+03  2.050e+03   0.648 0.516794    </span></span>
<span><span class="co">#&gt; garage_qual_ex           2.552e+04  1.688e+04   1.511 0.130951    </span></span>
<span><span class="co">#&gt; garage_cond_po          -1.678e+04  1.172e+04  -1.432 0.152520    </span></span>
<span><span class="co">#&gt; paved_drive_n           -8.943e+02  3.652e+03  -0.245 0.806564    </span></span>
<span><span class="co">#&gt; pool_qc_0                6.574e+05  8.534e+04   7.703 2.59e-14 ***</span></span>
<span><span class="co">#&gt; fence_mn_prv             3.470e+03  2.496e+03   1.390 0.164775    </span></span>
<span><span class="co">#&gt; misc_feature_othr        7.702e+03  2.040e+04   0.378 0.705783    </span></span>
<span><span class="co">#&gt; misc_feature_shed       -1.074e+03  4.397e+03  -0.244 0.807092    </span></span>
<span><span class="co">#&gt; sale_type_con            2.957e+04  1.992e+04   1.484 0.137968    </span></span>
<span><span class="co">#&gt; sale_type_con_ld         1.005e+04  9.752e+03   1.031 0.302836    </span></span>
<span><span class="co">#&gt; sale_type_con_li         6.460e+03  1.239e+04   0.521 0.602232    </span></span>
<span><span class="co">#&gt; sale_type_cwd            1.622e+04  1.416e+04   1.145 0.252409    </span></span>
<span><span class="co">#&gt; sale_type_new            1.833e+04  4.139e+03   4.429 1.03e-05 ***</span></span>
<span><span class="co">#&gt; sale_type_oth            9.270e+03  1.627e+04   0.570 0.569019    </span></span>
<span><span class="co">#&gt; sale_condition_adj_land  2.705e+04  1.480e+04   1.827 0.067932 .  </span></span>
<span><span class="co">#&gt; sale_condition_alloca   -7.798e+03  9.184e+03  -0.849 0.395961    </span></span>
<span><span class="co">#&gt; sale_condition_normal    6.808e+03  2.766e+03   2.461 0.013970 *  </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual standard error: 26970 on 1325 degrees of freedom</span></span>
<span><span class="co">#&gt; Multiple R-squared:  0.8953, Adjusted R-squared:  0.8848 </span></span>
<span><span class="co">#&gt; F-statistic: 84.59 on 134 and 1325 DF,  p-value: &lt; 2.2e-16</span></span></code></pre></div>
<p>There are clearly a lot of variables. Most of them are insignificant
and the coefficient direction varies wildly from what we have seen in
correlation. This is a fairly bad model that seems to be significantly
over fitting.</p>
</div>
<div class="section level2">
<h2 id="lets-see-what-random-forest-rfe-gives">Let’s see what Random Forest RFE gives<a class="anchor" aria-label="anchor" href="#lets-see-what-random-forest-rfe-gives"></a>
</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">control</span> <span class="op">&lt;-</span> <span class="fu">caret</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/caret/man/rfeControl.html" class="external-link">rfeControl</a></span><span class="op">(</span>functions <span class="op">=</span> <span class="va">rfFuncs</span>, </span>
<span>                      method <span class="op">=</span> <span class="st">"repeatedcv"</span>, <span class="co"># repeated cv</span></span>
<span>                      repeats <span class="op">=</span> <span class="fl">2</span>, <span class="co"># number of repeats</span></span>
<span>                      number <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># number of folds</span></span>
<span></span>
<span></span>
<span><span class="va">result_rfe</span> <span class="op">&lt;-</span> <span class="fu">caret</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/caret/man/rfe.html" class="external-link">rfe</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">[</span> , <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sale_price"</span><span class="op">)</span><span class="op">]</span>, </span>
<span>                   y <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">$</span><span class="va">sale_price</span>, </span>
<span>                   sizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">35</span><span class="op">)</span>,</span>
<span>                   rfeControl <span class="op">=</span> <span class="va">control</span><span class="op">)</span></span>
<span><span class="va">result_rfe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/predictors.html" class="external-link">predictors</a></span><span class="op">(</span><span class="va">result_rfe</span><span class="op">)</span></span></code></pre></div>
<p>This is about 10x slower than TangledFeatures. Let’s see the variable
behavior in a linear model.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">formula_rfe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"sale_price"</span>, <span class="st">'~'</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">result_rfe</span>, collapse <span class="op">=</span> <span class="st">"+"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lm_rfe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">formula_rfe</span>, data <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Cleaned_Data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_rfe</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = formula_rfe, data = Data$Cleaned_Data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">#&gt; -484453  -15025   -1020   13777  274307 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                        Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">#&gt; (Intercept)          -1.202e+06  1.551e+05  -7.751 1.73e-14 ***</span></span>
<span><span class="co">#&gt; gr_liv_area           1.846e+01  1.901e+01   0.971 0.331743    </span></span>
<span><span class="co">#&gt; overall_qual          1.682e+04  1.153e+03  14.592  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; total_bsmt_sf         1.056e+01  6.719e+00   1.572 0.116159    </span></span>
<span><span class="co">#&gt; bsmt_fin_sf1          6.962e+00  5.818e+00   1.197 0.231626    </span></span>
<span><span class="co">#&gt; x2nd_flr_sf           3.007e+01  1.922e+01   1.564 0.117972    </span></span>
<span><span class="co">#&gt; x1st_flr_sf           2.529e+01  1.947e+01   1.299 0.194262    </span></span>
<span><span class="co">#&gt; garage_cars           1.719e+04  2.905e+03   5.917 4.10e-09 ***</span></span>
<span><span class="co">#&gt; garage_area          -2.292e+00  9.563e+00  -0.240 0.810609    </span></span>
<span><span class="co">#&gt; year_built            4.050e+02  6.614e+01   6.123 1.18e-09 ***</span></span>
<span><span class="co">#&gt; lot_area              4.318e-01  9.823e-02   4.395 1.19e-05 ***</span></span>
<span><span class="co">#&gt; exter_qual_ta        -4.192e+04  5.165e+03  -8.116 1.03e-15 ***</span></span>
<span><span class="co">#&gt; year_remod_add        2.002e+02  6.622e+01   3.023 0.002544 ** </span></span>
<span><span class="co">#&gt; overall_cond          5.358e+03  1.018e+03   5.264 1.63e-07 ***</span></span>
<span><span class="co">#&gt; tot_rms_abv_grd      -6.810e+02  1.037e+03  -0.657 0.511415    </span></span>
<span><span class="co">#&gt; garage_yr_blt        -1.025e+01  3.264e+00  -3.140 0.001723 ** </span></span>
<span><span class="co">#&gt; ms_zoning_rm         -3.608e+03  4.554e+03  -0.792 0.428427    </span></span>
<span><span class="co">#&gt; ms_sub_class         -1.627e+02  2.484e+01  -6.551 7.94e-11 ***</span></span>
<span><span class="co">#&gt; neighborhood_crawfor  2.505e+04  5.167e+03   4.847 1.39e-06 ***</span></span>
<span><span class="co">#&gt; fireplace_qu_0       -5.575e+02  4.335e+03  -0.129 0.897692    </span></span>
<span><span class="co">#&gt; garage_type_detchd    1.502e+03  4.162e+03   0.361 0.718320    </span></span>
<span><span class="co">#&gt; full_bath             3.244e+03  2.728e+03   1.189 0.234573    </span></span>
<span><span class="co">#&gt; kitchen_qual_gd      -7.413e+03  2.502e+03  -2.963 0.003100 ** </span></span>
<span><span class="co">#&gt; garage_type_attchd   -1.188e+03  3.491e+03  -0.340 0.733766    </span></span>
<span><span class="co">#&gt; bsmt_unf_sf          -2.830e+00  5.908e+00  -0.479 0.631963    </span></span>
<span><span class="co">#&gt; mas_vnr_area          2.027e+01  5.854e+00   3.463 0.000550 ***</span></span>
<span><span class="co">#&gt; open_porch_sf        -1.349e+00  1.476e+01  -0.091 0.927189    </span></span>
<span><span class="co">#&gt; ms_zoning_rl          1.136e+03  4.041e+03   0.281 0.778738    </span></span>
<span><span class="co">#&gt; half_bath            -1.003e+03  2.584e+03  -0.388 0.697897    </span></span>
<span><span class="co">#&gt; wood_deck_sf          2.910e+01  7.625e+00   3.816 0.000142 ***</span></span>
<span><span class="co">#&gt; garage_finish_unf    -2.190e+03  2.632e+03  -0.832 0.405543    </span></span>
<span><span class="co">#&gt; fireplaces            5.210e+03  3.419e+03   1.524 0.127851    </span></span>
<span><span class="co">#&gt; exter_qual_gd        -2.808e+04  5.092e+03  -5.515 4.13e-08 ***</span></span>
<span><span class="co">#&gt; bsmt_full_bath        9.431e+03  2.407e+03   3.917 9.38e-05 ***</span></span>
<span><span class="co">#&gt; bsmt_qual_gd         -1.212e+04  2.447e+03  -4.954 8.12e-07 ***</span></span>
<span><span class="co">#&gt; central_air_n         1.597e+03  4.274e+03   0.374 0.708755    </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual standard error: 33390 on 1424 degrees of freedom</span></span>
<span><span class="co">#&gt; Multiple R-squared:  0.8276, Adjusted R-squared:  0.8233 </span></span>
<span><span class="co">#&gt; F-statistic: 195.2 on 35 and 1424 DF,  p-value: &lt; 2.2e-16</span></span></code></pre></div>
<p>Although a little better than lasso, we still have many variables
that are insignificant. Variables such as garage_area having a negative
coefficient also do not make sense.</p>
</div>
<div class="section level2">
<h2 id="comparisons">Comparisons<a class="anchor" aria-label="anchor" href="#comparisons"></a>
</h2>
<p>If we take a look at the coefficient behavior across three models for
a few variables, we can see that it is largely the same with one major
exception.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">jtools</span><span class="fu">::</span><span class="fu"><a href="https://jtools.jacob-long.com/reference/plot_summs.html" class="external-link">plot_summs</a></span><span class="op">(</span><span class="va">lm_TangledFeatures</span>, <span class="va">lm_rfe</span>, <span class="va">lm_lasso</span> , coefs <span class="op">=</span> </span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lm_TangledFeatures</span><span class="op">$</span><span class="va">coef</span><span class="op">)</span><span class="op">[</span><span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lm_TangledFeatures</span><span class="op">$</span><span class="va">coef</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">(</span><span class="st">"(Intercept)"</span><span class="op">)</span>,                        <span class="st">"overall_qual"</span>, <span class="st">"bsmt_qual_ex"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                   model.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TangledFeatures"</span>, <span class="st">"Random Forest RFE"</span>, <span class="st">"Lasso"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Example_Walkthrough_files/figure-html/Plotting%20and%20Comparing%20Coefficents-1.png" width="700"></p>
<p>We can see the coefficients as well as the confidence intervals for
each linear model.</p>
<p>Both Lasso and Random Forest make the garage_area variable negative,
as it is highly correlated with other variables. TangledFeatures takes
the variable interrelationships into account and generates the correct
variable effect. The confidence interval for the model from
TangledFeatures is tighter as well.</p>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>We have seem the effects variables from TangledFeatures has on the
outcome compared to a few other simple feature techniques. There are
many ways to pick features for a linear/logistic model. As of right now,
TangledFeatures is the best alternative to traditional dimensionality
reduction techniques.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Allen Sunny.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
